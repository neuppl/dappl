earthquake <- flip 0.0001 ;
burglary <- flip 0.001 ;
alarm <- (earthquake || burglary) ;
phoneWorking <- (if earthquake then flip 0.7 else flip 0.99);
maryWakes <- (if alarm then
    (if earthquake then flip 0.8 else flip 0.6)
    else flip 0.2);
called <- (maryWakes && phoneWorking);
observe(called);
if burglary then reward 1 else reward 0